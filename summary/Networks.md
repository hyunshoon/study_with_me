네트워크 필수 지식을 정리한다.

## Index
1. 네트워크 기초
2. TCP/IP 4계층 모델

    - TCP와 UDP의 비교
    - TCP 3-way-handshake
  
3. 네트워크 기기
	- IP주소

4. HTTP
    - HTTP 와 HTTPS
    - HTTP 의 문제점들
    - HTTP 의 GET 과 POST 비교

DNS Round Robin 방식

웹 통신의 큰 흐름


## 네트워크 기초

네트워크: 노드들이 링크로 연결되어 있어서 리소스를 공유하는 집합. (노드: 서버, 라우터, 스위치 등. 링크: 유선 혹은 무선)

### 처리량과 지연시간

네트워크를 구축할 때는 많은 트래픽을 처리할 수 있고 지연시간이 짧으면 좋다.

**처리량(Throughput)**: 성공적으로 전달된 데이터의 양. 네트워크 장치 간의 대역폭(주어진 시간동안 네트워크 연결을 통해 흐를 수 있는 최대 비트 수), 에러, 장치의 하드웨어 스펙 등에 영향을 받음. 단위로는 bps(bits per second)사용. 

![](https://velog.velcdn.com/images/hyunshoon/post/924b54ce-8656-4be2-b17b-8f0194035e61/image.png)

**지연시간(Latency)**: 요청이 처리되는 시간. 메시지가 두 장치를 왕복하는데 걸린 시간. 지연 시간은 매체 타입(유/무선), 패킷 크기, 라우터의 패킷 처리 시간에 영향을 받는다.

### 네트워크 토폴로지와 병목 현상

네트워크 토폴로지란 노드와 링크가 배치되는 연결 형태를 의미한다.

트리 토폴로지: 트리형태로 배치. 노드의 추가 삭제가 쉬우며 특정 노드에 트래픽이 집중될 때 하위 노드에 영향을 미칠 수 있다.

**버스 토폴로지:** 중앙 통신 회선 하나에 여러개의 노드가 연결되어 공유하는 네트워크 구성을 말하며 LAN에서 사용한다. 설치 비용이 적고 신뢰성이 우수하며 노드를 추가하거나 삭제하기 쉽지만 스푸핑이 가능한 문제가 있다. 

**스타 토폴로지**: 중앙에 있는 노드에 모두 연결된 네트워크 구성. 노드를 추가하거나 에러 탐지가 쉽고 패킷의 충돌 발생 가능성이 적다. 노드 장애시 에러 발견이 쉽고 다른 노드에 끼치는 영향이 적지만 중앙 노드에 장애가 발생하면 전체 네트워크 사용이 불가능하다. 설치 비용이 비싸다.

링형 토폴로지: 각 노드가 양 옆의 노드와 연결하여 고리형태를 띄는 토폴로지. 노드 수가 증가해도 네트워크상의 손실이 거의 없다. 노드 장애시 발견이 쉽지만 네트워크 구성 변경이 어렵고 회선에 장애가 발생하면 전체 네트워크에 영향을 크게 끼치는 문제가 있다.

**메시 토폴로지**: 그물망처럼 연결되는 토폴로지. 한 노드에 장애가 발생해도 여러개의 경로가 존재하므로 네트워크를 계속 사용할 수 있고 트래픽 분산 처리도 가능하다. 노드의 추가가 어렵고 구축 비용과 운용 비용이 고가이다.

** 병목 현상:** 시스템의 성능이나 용량이 하나의 구성 요소로 인해 제한을 받는 현상을 말한다. 토폴로지가 중요한 이유는 병목 현상을 찾을 때 중요한 기준이 되기 때문이다.

### 네트워크 분류

규모를 기반으로 분류할 수 있다. 


LAN(Local Area Network): 근거리 통신망. 전송 속도가 빠르고 혼잡하지 않다. ex) 건물 내부
MAN(Metropolitian Area Network): 도시 같은 넓은 지역 네트워크. LAN 보다는 혼잡하고 느리다.
WAN(Wide Area Network): 광역 네트워크로 국가 또는 대륙. 가장 느리며 혼잡하다.

### 네트워크 성능 분석 명령어

네트워크 병목 현상의 주된 원인은 다음과 같다.
- 네트워크 대역폭
- 네트워크 토폴로지
- 서버 CPU, 메모리 사용량
- 비효율적인 네트워크 구성

이때는 네트워크 문제인지 테스트 후 네트워크 문제라면 네트워크 성능 분석을 해야한다. 이때 사용되는 몇가지 명령어를 알아보자.

** ping: ** ping(Packet INternet Groper)은 네트워크 상태를 확인하려는 대상 노드를 향해 일정 크기의 패킷을 전송하는 명령어. 핑을 통해 해당 노드의 패킷 수신 상태와 도달하기까지 시간등을 알 수 있으며 해당 노드까지 네트워크가 잘 연결되었는지 확인할 수 있다. TCP/IP 프로토콜중에 ICMP 프로토콜을 통해 동작한다.

** netstat: ** 접속되있는 서비스들의 네트워크 상태를 표시하는데 사용되며 네트워크 접속, 라우팅 테이블, 네트워크 프로토콜 등 리스트를 보여준다. 주로 서비스의 포트가 열려있는지 확인할 때 쓴다.

** nslookup: ** DNS에 관련된 내용을 확인할 때 쓴다. 특정 도메인에 매핑된 IP를 확인하기 위해 사용한다.

** traceroute: ** 목적지 노드까지 네트워크 경로를 확인할 때 쓴다. 목적지 노드까지 도달할 때 어느 구간에서 느려지는지 확인하기 위해 사용.


## TCP/IP 4계층 모델

인터넷 프로토콜 스위트는 인터넷에서 컴퓨터들이 정보를 주고받기 위한 프로토콜 집합으로 OSI 7계층이나 TCP/IP 4계층 모델을 중심으로 설명한다. TCP/IP 4계층은 애플리케이션 계층, 전송 계층, 인터넷 계층, 링크 계층으로 나뉜다. 이 계층들은 특정 계층이 변경되었을 때 다른 계층에 영향을 미치지 않도록 설계되었다. 예를들어 TCP에서 UDP로 전송 프로토콜을 변경했다고 해서 브라우저를 재설치해야하는 것은 아니다.

![](https://velog.velcdn.com/images/hyunshoon/post/6931b410-efb7-490e-a01d-51232c8aa418/image.png)

### 애플리케이션 계층

애플리케이션 계층은 HTTP, SSH, FTP, SMTP, DNS 등 응용프로그램이 사용되는 프로토콜 계층으로 웹 서비스, 이메일 등 서비스를 실질적으로 사람들에게 제공하는 계층.

### 전송 계층

전송계층은 송신자와 수신자를 연결해주는 통신 서비스를 제공하며 연결 지향 데이터 스트림 지원, 신뢰성, 흐름 제어를 제공할 수 있으며 애플리케이션과 인터넷 계층 사이의 데이터가 전달될 때 중계 역할을 한다. 대표적으로 TCP와 UDP가 있다.

#### TCP vs UDP


**UDP(User Datagram Protocol)** 는 비연결형 프로토콜이다. TCP와 달리 흐름제어, 오류제어 및 손상된 세그먼트에 대한 재전송을 지원하지 않는다. 종종 클라이언트는 서버로 짧은 요청을 보내고, 짧은 응답을 기대한다. 만약 요청 또는 응답이 손실된다면, 클라이언트는 time out 되고 다시 시도할 수 있으면 된다. TCP보다 간단하다.
UDP를 사용한 것들에는 DNS가 있다. 어떤 호스트 네임의 IP 주소를 찾을 필요가 있는 프로그램은, DNS 서버로 호스트 네임을 포함한 UDP 패킷을 보낸다. 이 서버는 호스트의 IP 주소를 포함한 UDP 패킷으로 응답한다. 사전에 설정이 필요하지 않으며 그 후에 해제가 필요하지 않다.

대부분은 신뢰성과 순차적인 전달이 필요하다. **TCP(Trasmission Control Protocol)** 는 이를 지원한다. TCP는 송신자와 수신자에 소켓이라는 EndPoint를 생성한다. TCP 연결 수립에는 3-way handshake를 통해 수립된다. 모든 TCP 연결은 Point to Point(각 연결이 정확이 2개의 엔드포인트를 가짐)와 Full-duplex(양방향 전송) 방식이다.

#### TCP 3-way handshake

TCP는 신뢰성을 확보한 연결을 위해 3-way handshake 로 연결을 수립한다. 클라이언트와 서버가 통신할 때 다음과 같은 3단계를 거친다.

![](https://velog.velcdn.com/images/hyunshoon/post/659274e9-0de1-4f5d-8efe-9b8a208b5c99/image.png)

1. SYN 단계: 클라이언트는 서버에 ISN(Initial Sequence Number; 초기 네트워크 연결을 할 때 할당된 고유 시퀀스 번호)을 담아 SYN(연결 요청 플래그)를 보낸다.
2. SYN+ACK 단계: 서버는 클라이언트의 SYN를 수신하고 서버의 ISN을 담아 SYN를 보내며 동시에 ACK(응답 플래그)로 클라이언트의 ISN+1을 담아 보낸다.
3. ACK 단계: 클라이언트는 서버의 SYN에서 ISN+1 한 값을 ACK로 서버에 보낸다.

이렇게 3-way handshake 과정 이후 신뢰성이 구축되고 데이터 전송을 시작한다.

#### TCP 4-way handshake

TCP가 연결을 해제할 때는 4-way handshake 과정이 발생한다.








### 인터넷 계층

### 링크 계층



Reference
- https://github.com/JaeYeopHan/Interview_Question_for_Beginner/tree/master/Network
- CS전공지식 노트
- https://learning.mlytics.com/the-internet/what-is-the-tcp-ip-model/
- https://afteracademy.com/blog/what-is-a-tcp-3-way-handshake-process/
